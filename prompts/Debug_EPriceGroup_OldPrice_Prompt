# –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–ª–∞–¥–∫–∏: EPriceGroup Old Price / Discount

## –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ HTML —Ñ–∞–π–ª–∞ `iphone 16 pro max ‚Äî –Ø–Ω–¥–µ–∫—Å.html` –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–Ω–∏–ø–ø–µ—Ç–æ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è Variant Properties `Discount` –∏ `Old Price` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `EPriceGroup`.

### –°–∏–º–ø—Ç–æ–º
–°–Ω–∏–ø–ø–µ—Ç **vernik.me** (—Ü–µ–Ω–∞ 83 990 ‚ÇΩ):
- –í HTML **–ù–ï–¢** —Å—Ç–∞—Ä–æ–π —Ü–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏
- –ù–æ –≤ Figma –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–ª–æ–∫ `Discount + Old Price` —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (`‚Äì10%`, `1 000 000 ‚ÇΩ`)

### –ü—Ä–∏—á–∏–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞
–í `src/utils/snippet-parser.ts` (—Å—Ç—Ä–æ–∫–∏ 216-217):
```typescript
if (priceGroupPair) {
    row['#EPriceGroup_Discount'] = 'true';  // ‚Üê –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –°–†–ê–ó–£
    row['#EPriceGroup_OldPrice'] = 'true';  // ‚Üê –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç!
    ...
}
```

–ú—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º `true` —Å—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ `EPriceGroup-Pair`, –ù–ï –ø—Ä–æ–≤–µ—Ä—è—è, –µ—Å—Ç—å –ª–∏ —Ä–µ–∞–ª—å–Ω–æ —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ –∏ —Å–∫–∏–¥–∫–∞ –≤–Ω—É—Ç—Ä–∏.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å)
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `#EPriceGroup_Discount = 'true'` –∏ `#EPriceGroup_OldPrice = 'true'` –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è:

```typescript
if (priceGroupPair) {
    console.log('‚úÖ –ù–∞–π–¥–µ–Ω EPriceGroup-Pair, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É —Ü–µ–Ω');
    
    // –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º true —Å—Ä–∞–∑—É! –£—Å—Ç–∞–Ω–æ–≤–∏–º –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –Ω–∞–π–¥—ë–º –¥–∞–Ω–Ω—ã–µ
    
    // ... –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ü–µ–Ω ...
    
    // 3. –ò–∑–≤–ª–µ–∫–∞–µ–º #OldPrice
    if (oldPriceEl) {
        // ...
        row['#OldPrice'] = formattedOldPrice;
        row['#EPriceGroup_OldPrice'] = 'true';  // ‚Üê –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
    }
    
    // 4. –ò–∑–≤–ª–µ–∫–∞–µ–º #discount
    if (discountContentEl) {
        // ...
        row['#discount'] = formattedDiscount;
        row['#EPriceGroup_Discount'] = 'true';  // ‚Üê –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
    }
}
```

---

## –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

### 1. Fintech type/view
- **–ü—Ä–æ–±–ª–µ–º–∞**: `type=Pay` –∏ `view=Short` –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å
- **–ü—Ä–∏—á–∏–Ω–∞**: 
  - –°–≤–æ–π—Å—Ç–≤–æ `View` –≤ Figma —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã
  - –ò–Ω—Å—Ç–∞–Ω—Å –Ω–∞–∑—ã–≤–∞–ª—Å—è `Meta / Fintech ` (—Å –ø—Ä–æ–±–µ–ª–æ–º)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–º—ë–Ω –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä

### 2. LabelDiscount "–í–∞–º ‚Äì2%"
- **–ü—Ä–æ–±–ª–µ–º–∞**: –î—É–±–ª–∏—Ä–æ–≤–∞–ª–æ—Å—å "–í–∞–º –í–∞–º ‚Äì2%"
- **–ü—Ä–∏—á–∏–Ω–∞**: –ò `snippet-parser.ts`, –∏ `handleLabelDiscountView` –¥–æ–±–∞–≤–ª—è–ª–∏ "–í–∞–º"
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –¢–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `snippet-parser.ts`

### 3. –°–∫–∏–¥–∫–∞ outlineSpecial
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–≤–æ–π—Å—Ç–≤–æ `view=outlineSpecial` –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–æ—Å—å
- **–ü—Ä–∏—á–∏–Ω–∞**: –í Figma —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `View` (–±–æ–ª—å—à–∞—è –±—É–∫–≤–∞)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –ò—Å–ø–æ–ª—å–∑—É–µ–º `View=outlineSpecial`

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `src/utils/snippet-parser.ts` | –ü–∞—Ä—Å–∏–Ω–≥ HTML, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| `src/component-handlers.ts` | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫ Figma –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º |
| `src/parsing-rules.ts` | CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ |
| `src/config.ts` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–º—ë–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Å–≤–æ–π—Å—Ç–≤ |

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–í `handleEPriceGroup` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```
üí∞ [EPriceGroup] Discount data: "...", hasDiscount: ...
üí∞ [EPriceGroup] Old Price=false —Ä–µ–∑—É–ª—å—Ç–∞—Ç: true/false
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ Figma

### MetaFintech
```typescript
type MetaFintechProps = {
  size?: "L" | "M" | "S";
  type?: "Split" | "Pay" | "Yandex Plus" | "T-Pay" | ...;
  View?: "Short" | "Long" | "Extra Long" | "Extra Short" | "Default";
};
```

### EPriceGroup
```typescript
// Variant Properties:
- Discount: true | false
- Old Price: true | false  // —Ç–∞–∫–∂–µ OldPrice, Old_Price
- Fintech: true | false
```

### LabelDiscount
```typescript
// Variant Properties:
- View: "outlineSpecial" | "outlinePrimary" | "default"
```

---

## HTML –∞–Ω–∞–ª–∏–∑ (iphone 16 pro max ‚Äî –Ø–Ω–¥–µ–∫—Å.html)

- **18 EShopItem —Å–Ω–∏–ø–ø–µ—Ç–æ–≤**
- **–¢–æ–ª—å–∫–æ 1** –∏–º–µ–µ—Ç `Label_view_outlineSpecial` (—Å–∫–∏–¥–∫–∞ "–í–∞–º ‚Äì2%")
- **–¢–æ–ª—å–∫–æ 1** –∏–º–µ–µ—Ç `Fintech_type_pay` (–Ø–Ω–¥–µ–∫—Å –ü—ç–π)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `EBnpl` (–°–ø–ª–∏—Ç, –î–æ–ª—è–º–∏)

### –ü–µ—Ä–≤—ã–π —Å–Ω–∏–ø–ø–µ—Ç (fort.istudio-msk.ru)
- –¶–µ–Ω–∞: 81 299 ‚ÇΩ
- –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: 83 299 ‚ÇΩ
- –°–∫–∏–¥–∫–∞: –í–∞–º ‚Äì2% (outlineSpecial)
- Fintech: type=Pay, view=Short
- Barometer: below-market

### –í—Ç–æ—Ä–æ–π —Å–Ω–∏–ø–ø–µ—Ç (vernik.me)
- –¶–µ–Ω–∞: 83 990 ‚ÇΩ
- **–ù–ï–¢ —Å—Ç–∞—Ä–æ–π —Ü–µ–Ω—ã**
- **–ù–ï–¢ —Å–∫–∏–¥–∫–∏**
- Barometer: below-market

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –°–±–æ—Ä–∫–∞
npm run build

# –ê–Ω–∞–ª–∏–∑ HTML (Python)
python3 analyze_yandex_html.py
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å `snippet-parser.ts` ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `#EPriceGroup_Discount` –∏ `#EPriceGroup_OldPrice` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö 3 —Å–Ω–∏–ø–ø–µ—Ç–∞—Ö
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–ª–æ–∫ `Discount + Old Price` —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ `Discount=false` –∏ `Old Price=false`

