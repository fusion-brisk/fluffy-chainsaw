# Contentify Plugin ‚Äî Continuation Context

## –ü—Ä–æ–µ–∫—Ç
Figma-–ø–ª–∞–≥–∏–Ω "Contentify": –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞–∫–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ HTML (–≤—ã–¥–∞—á–∞ –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç–∞).

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### HTML-—Ñ–∞–π–ª—ã
- HTML-—Ñ–∞–π–ª—ã –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ç—è–∂—ë–ª—ã–µ (~1.7MB)
- **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Python-—Å–∫—Ä–∏–ø—Ç—ã** (BeautifulSoup), –Ω–µ —á–∏—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é
- –ü—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–ø—Ç–æ–≤: `analyze_*.py` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

### Figma MCP
- –î–æ—Å—Ç—É–ø –∫ Figma Desktop —á–µ—Ä–µ–∑ MCP
- –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `get_screenshot`, `get_metadata`, `get_design_context`
- –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤ –≤ Figma, –Ω–æ –ù–ï —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π HTML

### –°–±–æ—Ä–∫–∞
```bash
npm run build  # Rollup + Babel ‚Üí ES5
```
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–≥–∏–Ω –≤ Figma –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å HTML.

---

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: "–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è"

### –°–∏–º–ø—Ç–æ–º—ã
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞: —Ü–µ–Ω–∞, —Å–∫–∏–¥–∫–∞ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ ‚Äî –≤—Å—ë –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –ü—Ä–∏—á–∏–Ω–∞
–ö–æ–≥–¥–∞ –º–µ–Ω—è–µ–º **variant properties** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `EPriceGroup.Discount=true`), Figma **–ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤**. –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –Ω–æ–¥—ã (`EPrice`, `LabelDiscount`) —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏.

**–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–±–ª–µ–º—ã:**
1. –ù–∞—Ö–æ–¥–∏–º `EPriceGroup` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É
2. –ù–∞—Ö–æ–¥–∏–º `EPrice` –≤–Ω—É—Ç—Ä–∏ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É  
3. –ú–µ–Ω—è–µ–º variant: `EPriceGroup.Discount = true` ‚Üê **–ó–î–ï–°–¨ –¥–µ—Ä–µ–≤–æ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è**
4. –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–º–µ–Ω–∏—Ç—å `EPrice` –ø–æ —Å—Ç–∞—Ä–æ–π —Å—Å—ã–ª–∫–µ ‚Üí **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

### –†–µ—à–µ–Ω–∏–µ ‚Äî –ü–ï–†–ï-–ü–û–ò–°–ö –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

```typescript
// 1. –ù–∞—Ö–æ–¥–∏–º –∏ –º–µ–Ω—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã EPriceGroup
const ePriceGroup = findInstanceByName(container, 'EPriceGroup');
ePriceGroup.setProperties({ 'Discount#xxx': true });

// 2. –ü–ï–†–ï-–ù–ê–•–û–î–ò–ú EPriceGroup –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤!
const freshEPriceGroup = findInstanceByName(container, 'EPriceGroup');

// 3. –¢–µ–ø–µ—Ä—å –∏—â–µ–º EPrice –≤–Ω—É—Ç—Ä–∏ –°–í–ï–ñ–ï–ô —Å—Å—ã–ª–∫–∏
const ePrice = findInstanceByName(freshEPriceGroup, 'EPrice');

// 4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ EPrice
ePrice.setProperties({ view: 'special' });

// 5. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å TEXT node ‚Äî —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ-–Ω–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ setProperties!
const freshEPrice = findInstanceByName(freshEPriceGroup, 'EPrice');
const textNode = findTextNode(freshEPrice);
textNode.characters = '81 299';
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
1. **–ü–æ—Å–ª–µ –ª—é–±–æ–≥–æ `setProperties` –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ** ‚Äî –ø–µ—Ä–µ-–Ω–∞—Ö–æ–¥–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
2. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ –æ–¥–∏–Ω `setProperties` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
3. **TEXT nodes –∏—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏** ‚Äî –ø–æ—Å–ª–µ –≤—Å–µ—Ö variant changes
4. **Async —Ñ—É–Ω–∫—Ü–∏–∏** –¥–ª—è `figma.loadFontAsync()` –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ò–µ—Ä–∞—Ä—Ö–∏—è
```
EShopItem / ESnippet / EProductSnippet2
  ‚îî‚îÄ‚îÄ EPriceGroup
        ‚îú‚îÄ‚îÄ EPrice (—Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ ‚Äî view: default/special)
        ‚îú‚îÄ‚îÄ LabelDiscount (—Å–∫–∏–¥–∫–∞ ‚Äî "–í–∞–º ‚Äì2%")
        ‚îú‚îÄ‚îÄ Discount + Old Price (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
        ‚îÇ     ‚îî‚îÄ‚îÄ EPrice (—Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞)
        ‚îú‚îÄ‚îÄ EPriceBarometer
        ‚îî‚îÄ‚îÄ Fintech
```

### EPrice ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ù–ï–¢ exposed property –¥–ª—è —Ü–µ–Ω—ã!** –°–≤–æ–π—Å—Ç–≤–∞: `view`, `lineThrough`, `range`, `Size`, `weight`
- –¶–µ–Ω–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ **TEXT node –≤–Ω—É—Ç—Ä–∏** (–∏—Å–∫–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ `#OrganicPrice` –∏–ª–∏ –ø–æ —á–∏—Å–ª–æ–≤–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É)
- `view` –∏–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã: `default`, `special` (–ù–ï `discount`!)

### LabelDiscount ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏  
- –¢–µ–∫—Å—Ç —Å–∫–∏–¥–∫–∏ –≤ `row['#discount']` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–í–∞–º ‚Äì2%" (–Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å prefix –ø–æ–≤—Ç–æ—Ä–Ω–æ!)
- TEXT node –∏—Å–∫–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ `content`, `discount`, `value` –∏–ª–∏ –ø–æ —á–∏—Å–ª–æ–≤–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è –≤ `row`
```typescript
row['#OrganicPrice']        // "81 299" ‚Äî —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞
row['#OldPrice']            // "83 299" ‚Äî —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞  
row['#discount']            // "–í–∞–º ‚Äì2%" –∏–ª–∏ "‚Äì2%" ‚Äî —Ç–µ–∫—Å—Ç —Å–∫–∏–¥–∫–∏
row['#DiscountPercent']     // "2" ‚Äî —á–∏—Å–ª–æ —Å–∫–∏–¥–∫–∏
row['#EPriceGroup_Discount'] // "true"/"false" ‚Äî –µ—Å—Ç—å –ª–∏ —Å–∫–∏–¥–∫–∞
row['#EPriceGroup_OldPrice'] // "true"/"false" ‚Äî –µ—Å—Ç—å –ª–∏ —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞
row['#LabelDiscount_View']  // "outlineSpecial" ‚Äî –≤–∏–¥ –ª–µ–π–±–ª–∞
row['#DiscountPrefix']      // "–í–∞–º" ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å —Å–∫–∏–¥–∫–∏
```

---

## –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ
- `src/code.ts` ‚Äî –ª–æ–≥–∏–∫–∞ –ø–ª–∞–≥–∏–Ω–∞, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- `src/component-handlers.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (EPriceGroup, EPrice, LabelDiscount)
- `src/utils/snippet-parser.ts` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ HTML ‚Üí row data
- `src/parsing-rules.ts` ‚Äî CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ
- `src/text-handlers.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–ª–æ—ë–≤
- `src/image-handlers.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## –û—Ç–ª–∞–¥–∫–∞

### –ö–æ–Ω—Å–æ–ª—å Figma
`Plugins ‚Üí Development ‚Üí Show/Hide Console`

### –ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏
```
üîç [EPrice DEBUG] –ù–∞–π–¥–µ–Ω–æ X EPrice –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
üîÑ [EPriceGroup] –ü–µ—Ä–µ-–ø–æ–∏—Å–∫: –Ω–∞–π–¥–µ–Ω —Å–≤–µ–∂–∏–π
‚úÖ [EPrice] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–≤–æ–π—Å—Ç–≤–∞ –æ–¥–Ω–∏–º –≤—ã–∑–æ–≤–æ–º: {...}
üîç [EPrice] –ù–∞–π–¥–µ–Ω TEXT node "#OrganicPrice", —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º: "81 299"
‚úÖ [LabelDiscount] –¢–µ–∫—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: "–í–∞–º ‚Äì2%"
```

---

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (–Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ ‚úÖ
- –¶–µ–Ω–∞ EPrice —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–µ—Ä–µ–∑ TEXT node
- LabelDiscount –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–í–∞–º ‚Äì2%" –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–µ—Ä–µ-–ø–æ–∏—Å–∫ EPriceGroup –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

### –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
- –í—Å–µ —Ç–∏–ø—ã —Å–Ω–∏–ø–ø–µ—Ç–æ–≤: EShopItem, ESnippet, EProductSnippet2

