Продолжаем оптимизацию Figma-плагина Contentify.

## Контекст
Плагин парсит MHTML/HTML файлы поисковой выдачи Яндекса и заполняет Figma-макеты данными.

## Что сделано
- Фаза 1: Оптимизация regex (все inline regex вынесены в константы)
- Фаза 2: Разделение utils.ts на 12 модулей в src/utils/
- Фаза 3: Рефакторинг favicon-extractor.ts (Chain of Responsibility: 5 экстракторов)
- Фаза 4: Кэширование CSS-парсинга (css-cache.ts: один проход, Map lookup)
- Багфикс: Исправлено сопоставление фавиконок со сниппетами
- Документация обновлена: STRUCTURE.md, OPTIMIZATION_STATUS.md

## Структура src/utils/ (12 модулей)
- index.ts — реэкспорт
- regex.ts — все regex константы + getCachedRegex()
- encoding.ts — fixEncoding(), getTextContent()
- network.ts — fetchWithRetry(), convertImageToBase64()
- plugin-bridge.ts — log(), sendMessageToPlugin()
- dom-utils.ts — findSnippetContainers(), getStyleTags()
- mhtml-parser.ts — parseMhtmlFile()
- json-parser.ts — parseJsonFromNoframes()
- css-cache.ts — buildCSSCache(), getRulesByClass() [Phase 4]
- favicon-extractor.ts — extractFavicon() [Chain of Responsibility]
- price-extractor.ts — extractPrices()
- snippet-parser.ts — parseYandexSearchResults()

## Текущая задача: Фаза 5
Оптимизация DOM-обхода.

Сейчас используются множественные querySelectorAll для поиска элементов.
Нужно:
1. Использовать TreeWalker для эффективного обхода DOM
2. Один проход по дереву вместо множественных запросов
3. Кэширование найденных элементов

## Файлы для изучения
@docs/STRUCTURE.md — архитектура проекта
@docs/OPTIMIZATION_STATUS.md — статус и план
@src/utils/dom-utils.ts — findSnippetContainers(), filterTopLevelContainers()
@src/utils/snippet-parser.ts — extractRowData() с множеством querySelector

## Команда сборки
cd /Users/shchuchkin/Documents/GitHub/fluffy-chainsaw
export PATH="/Users/shchuchkin/.nvm/versions/node/v24.11.1/bin:$PATH"
npm run build

## Ограничения
- ES5 на выходе (babel → preset-env до IE11)
- Без новых зависимостей
- После каждого изменения — пересборка проекта










